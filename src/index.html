<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Crooms Bell Schedule</title>
    <link rel="stylesheet" type="text/css" href="./index.css">
    <link rel="stylesheet" type="text/css" href="https://croomssched.tech/styles/fonts.css">
    <script src="https://croomssched.tech/scripts/commons.js" defer></script>
    <script src="https://croomssched.tech/sched/schedule.js"></script>
</head>
<body>
<div id="app"></div>
<div id="moveThing">
    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGNsYXNzPSJpY29uIGljb24tdGFibGVyIGljb24tdGFibGVyLWdyaXAtdmVydGljYWwiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iY3VycmVudENvbG9yIiBmaWxsPSJub25lIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgogIDxjaXJjbGUgY3g9IjkiIGN5PSI1IiByPSIxIiAvPgogIDxjaXJjbGUgY3g9IjkiIGN5PSIxMiIgcj0iMSIgLz4KICA8Y2lyY2xlIGN4PSI5IiBjeT0iMTkiIHI9IjEiIC8+CiAgPGNpcmNsZSBjeD0iMTUiIGN5PSI1IiByPSIxIiAvPgogIDxjaXJjbGUgY3g9IjE1IiBjeT0iMTIiIHI9IjEiIC8+CiAgPGNpcmNsZSBjeD0iMTUiIGN5PSIxOSIgcj0iMSIgLz4KPC9zdmc+CgoK"
         alt="Move Area" draggable="false">
</div>
<script>
    const startSchedApp = async () => {
        await createCBSHSched(document.querySelector("#app"));

        setTimeout(() => {
            document.querySelector("#cbsh-application > div:last-child > button:last-child").addEventListener("click", () => {
                let x = (screen.width / 2) - 200;
                let y = (screen.height / 2) - 420;
                let settingsWindow = window.open("https://croomssched.tech/sched/settings/", "cbsh-settings",
                    "status=0,toolbar=0,location=0,width=400,height=720,screenX=" + x + ",screenY=" + y + ",popup=true");
                let isClosedInterval = setInterval(() => {
                    if (settingsWindow.closed) {
                        clearInterval(isClosedInterval);
                        window.location.reload();
                    }
                }, 50);
            }, false);

            document.querySelector("#cbsh-application > div:last-child > button:last-child").addEventListener("click", () => {
                let screen_x = (screen.width / 2) - 200;
                let screen_y = (screen.height / 2) - 420;
                let settingsWindow = window.open("/settings.html", "cbsh-settings", "status=0,toolbar=0,location=0,width=400,height=720,screenX=" + screen_x + ",screenY=" + screen_y );
                let isClosedInterval = setInterval(() => {
                    if (settingsWindow.closed) {
                        clearInterval(isClosedInterval);
                        window.location.reload();
                    }
                }, 50);
            });
        }, 1000);
    };

    startSchedApp();
</script>
</body>
</html>